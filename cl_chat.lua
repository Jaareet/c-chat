local a=false;local b=false;local c=true;local d=false;RegisterNetEvent('chatMessage')RegisterNetEvent('chat:addTemplate')RegisterNetEvent('chat:addMessage')RegisterNetEvent('chat:addSuggestion')RegisterNetEvent('chat:addSuggestions')RegisterNetEvent('chat:removeSuggestion')RegisterNetEvent('chat:clear')RegisterNetEvent('__cfx_internal:serverPrint')AddEventHandler('chatMessage',function(e,f,g)local h={g}if e~=""then table.insert(h,1,e)end;SendNUIMessage({type='ON_MESSAGE',message={color=f,multiline=true,args=h}})end)AddEventHandler('__cfx_internal:serverPrint',function(i)print(i)SendNUIMessage({type='ON_MESSAGE',message={templateId='print',multiline=true,args={i}}})end)AddEventHandler('chat:addMessage',function(j)j.bgcolor=j.color;SendNUIMessage({type='ON_MESSAGE',message=j})end)AddEventHandler('chat:addSuggestion',function(k,l,m)SendNUIMessage({type='ON_SUGGESTION_ADD',suggestion={name=k,help=l,params=m or nil}})end)AddEventHandler('chat:addSuggestions',function(n)for o,p in ipairs(n)do SendNUIMessage({type='ON_SUGGESTION_ADD',suggestion=p})end end)AddEventHandler('chat:removeSuggestion',function(k)SendNUIMessage({type='ON_SUGGESTION_REMOVE',name=k})end)AddEventHandler('chat:addTemplate',function(q,r)SendNUIMessage({type='ON_TEMPLATE_ADD',template={id=q,html=r}})end)AddEventHandler('chat:clear',function(k)SendNUIMessage({type='ON_CLEAR'})end)RegisterNUICallback('chatResult',function(s,t)a=false;SetNuiFocus(false)if not s.canceled then local q=PlayerId()local u,v,w=0,0x99,255;if s.message:sub(1,1)=='/'then ExecuteCommand(s.message:sub(2))else TriggerServerEvent('_chat:messageEntered',GetPlayerName(q),{u,v,w},s.message)end end;t('ok')end)local function x()if GetRegisteredCommands then local y=GetRegisteredCommands()local n={}for o,z in ipairs(y)do if IsAceAllowed(('command.%s'):format(z.name))then table.insert(n,{name='/'..z.name,help=''})end end;TriggerEvent('chat:addSuggestions',n)end end;local function A()local B={}for C=0,GetNumResources()-1 do local D=GetResourceByFindIndex(C)if GetResourceState(D)=='started'then local E=GetNumResourceMetadata(D,'chat_theme')if E>0 then local F=GetResourceMetadata(D,'chat_theme')local G=json.decode(GetResourceMetadata(D,'chat_theme_extra')or'null')if F and G then G.baseUrl='nui://'..D..'/'B[F]=G end end end end;SendNUIMessage({type='ON_UPDATE_THEMES',themes=B})end;AddEventHandler('onClientResourceStart',function(H)Wait(500)TriggerEvent("c-core_alertas:questalerta")x()A()end)AddEventHandler('onClientResourceStop',function(H)Wait(500)x()A()end)RegisterNUICallback('loaded',function(s,t)TriggerServerEvent('chat:init')x()A()d=true;t('ok')end)RegisterCommand('chat',function()SetTextChatEnabled(false)SetNuiFocus(false)if not a then a=true;b=true;SendNUIMessage({type='ON_OPEN'})end;if b then SetNuiFocus(true)b=false end;if d then local I=false;if IsScreenFadedOut()or IsPauseMenuActive()then I=true end;if I and not c or not I and c then c=I;SendNUIMessage({type='ON_SCREEN_STATE_CHANGE',shouldHide=I})end end end)RegisterKeyMapping('chat','Abre el chat','keyboard','T')print('^3[^0 c-chat ^3]^0 Started')